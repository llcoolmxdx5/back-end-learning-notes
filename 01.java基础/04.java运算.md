# java运算

## 运算符优先级

运算优先级从高到低依次是：

- ()、[]、{}	从左向右
- !、+、-、~、++、--	从右向左
- *、/、%	从左向右
- +、-	从左向右
- «、»、>>>	从左向右
- <、<=、>、>=、instanceof	从左向右
- ==、!=	从左向右
- &	从左向右
- ^	从左向右
- |	从左向右
- &&	从左向右
- ||	从左向右
- ?:	从右向左
- =、+=、-=、*=、/=、&=、|=、^=、~=、«=、»=、>>>=	从右向左

## 整数运算

Java的整数运算遵循四则运算规则，可以使用任意嵌套的小括号。四则运算规则和初等数学一致。

整数的数值表示不但是精确的，而且整数运算永远是精确的，即使是除法也是精确的，因为两个整数相除只能得到结果的整数部分

特别注意：整数的除法对于除数为0时运行时将报错，但编译不会报错。

要特别注意，整数由于存在范围限制，如果计算结果超出了范围，就会产生溢出，而溢出不会出错，却会得到一个奇怪的结果

左移实际上就是不断地×2，右移实际上就是不断地÷2

在运算过程中，如果参与运算的两个数类型不一致，那么计算结果为较大类型的整型。

## 浮点数运算

浮点数运算和整数运算相比，只能进行加减乘除这些数值计算，不能做位运算和移位运算。

在计算机中，浮点数虽然表示的范围大，但是，浮点数有个非常重要的特点，就是浮点数常常无法精确表示。

整数运算在除数为0时会报错，而浮点数运算在除数为0时，不会报错，但会返回几个特殊值：

- NaN表示 Not a Number
- Infinity 表示无穷大
- -Infinity 表示负无穷大

如果要进行四舍五入，可以对浮点数加上0.5再强制转型

```java
double d = 2.6;
int n = (int) (d + 0.5);
```

## 布尔运算

布尔运算是一种关系运算，包括以下几类：

- 比较运算符：>，>=，<，<=，==，!=
- 与运算 &&
- 或运算 ||
- 非运算 !

布尔运算的一个重要特点是短路运算。如果一个布尔运算的表达式能提前确定结果，则后续的计算不再执行，直接返回结果。

因为false && x的结果总是false，无论x是true还是false，因此，与运算在确定第一个值为false后，不再继续计算，而是直接返回false。

类似的，对于||运算，只要能确定第一个值为true，后续计算也不再进行，而是直接返回true

## 字符串

Java的编译器对字符串做了特殊照顾，可以使用+连接任意字符串和其他数据类型，这样极大地方便了字符串的处理。

如果用+连接字符串和其他数据类型，会将其他数据类型先自动转型为字符串，再连接

从Java 13开始，字符串可以用"""..."""表示多行字符串（Text Blocks）了

```java
String s = """
        SELECT * FROM
            users
        WHERE id > 100
        ORDER BY name DESC
        """;
```

上述多行字符串实际上是5行，在最后一个DESC后面还有一个\n。如果我们不想在字符串末尾加一个\n，就需要这么写

```java
String s = """
        SELECT * FROM
            users
        WHERE id > 100
        ORDER BY name DESC""";
```

还需要注意到，多行字符串前面共同的空格会被去掉
